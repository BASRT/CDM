@model IEnumerable<ConcremoteDeviceManagment.Models.DeviceConfig>

<p>
    @*@Html.ActionLink("Create New", "Create")*@
</p>
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <table class="table">
        <tr>
            <th class="table-row">
                @Html.DisplayName("BAS artikelnummer")
            </th>
            <th class="table-row">
                @Html.DisplayName("Prijs")
            </th>
            <th class="table-row">
                @Html.DisplayName("Beschrijving")
            </th>
            <th class="table-row">
                @Html.DisplayName("Aantal")
            </th>
            <th class="table-row">
                @Html.DisplayName("Bouw Volgorde")
            </th>
            <th class="table-row"></th>
        </tr>
        @foreach (var item in Model)
        {
        <tr>
            <td class="dropdown-toggle">
                @Html.DropDownList("EditDevice", item.Pricelist.bas_art_nr)
            </td>
            <td class="table-row">
                @*    <label id="#Price" class="form-control">@Model.courseStartDate</label>*@
                @*<p id="#Price" class="table-row">@Html.DisplayFor(modelitem => item.Pricelist.Price)</p>*@
                @*<p id="#Price" class="table-row">@Model.P</p>*@
                <p id="#Price">@item.Pricelist.Price</p>
            </td>
            <td class="table-row">
                @*<p id="#description">@Html.DisplayFor(modelitem => item.Pricelist.description)</p>*@
                <p id="#description">@item.Pricelist.description</p>
            </td>
            <td class="table-row">
                @Html.EditorFor(modelItem => item.amount, new { htmlAttributes = new { @class = "form-control" } })
            </td>
            <td class="table-row">
                @Html.EditorFor(modelItem => item.assembly_order, new { htmlAttributes = new { @class = "form-control" } })
            </td>
            <td class="table-row">
                <input type="submit" value="Save" class="btn btn-primary" />
                @*  <button onclick="location.href='@Url.Action("Edit", new { id=item.Device_config_id})';return false;" class="btn btn-primary">Edit</button>*@
                @*<button onclick="location.href='@Url.Action("GetDevice")';return false;" class="btn btn-info">Details</button>*@
                <button onclick="location.href='@Url.Action("Delete", "Home", new { id = item.Device_config_id })';return false;" class="btn btn-danger">Delete</button>
            </td>
            <td></td>
        </tr>
        }
    </table>
}
    <script type="text/javascript">
    $(function(){
        $("#EditDevice").change(function () {

            var Pricelist = { "Price, description": $(this).val() };
            $.ajax({
                type: 'POST',
                url: '@Url.Action("FillDeviceInfo")', // we are calling json method
                contentType: 'application/json; charset=utf-8',
                dataType: 'html',
                data: { "Price, description": $(this).val() },


                success: function (ret) {
                    //$('#Dates').val(ret.courseDates);
                    $('#Price').html(ret.Pricelist);
                    $('#description').html(ret.description);

                },
                error: function (ex) {
                    alert("Something is wrong, go fix it!!");
                }
            });

            return false;
        });
    });

    </script>